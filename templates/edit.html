{% extends 'base.html' %}

{% block script %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/camanjs/4.1.2/caman.full.min.js"></script>
<script src="/static/edit.js"></script>
{% endblock %}

{% block content %}
<img crossorigin="anonymous" id="image" src="{{image['url']}}" alt="" hidden>

<div class="container mx-3 p-0">
    <div class="row">

        <div id="sliders" class="col-4 mb-3">
                {% for slider in sliders %}
                <label for="{{slider.name}}" class="input-group-text text-sm text-light bg-primary">{{slider.name.capitalize()}}</label>
                <div class="input-group  m-2">
                    <div class="input-group-prepend">
                        <button class="btn btn-outline-secondary btn-sm fas fa-caret-left" type="button" data-direction="left"></button>
                    </div>
                    <input class="slider form-control" type="range" name="{{slider.name}}" id="{{slider.name}}" min="{{slider.range_min}}" max="{{slider.range_max}}" value="{{slider.value}}">
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary btn-sm fas fa-caret-right" type="button" data-direction="right"></button>
                    </div>
                    </div>
                {% endfor %}
        </div>

        <div class="col">
            <canvas id="canvas" width="400" height="{{image['height']*(400/image['width'])}}"></canvas>
        </div>

        <div class="col-2 side-buttons justify-contents-center">
            <button class="btn btn-sm bg-primary m-2 text-light" id="restore">Restore</button>
            <button class="btn btn-sm bg-primary m-2 text-light" id="save-filter">Save Filter</button>

            <form action="" id="filter-name-form" class="hide">
                <input type="text" name="filter-name" id="filter-name" size="15"  placeholder="filter name"></input>
                <button class="btn btn-sm btn-secondary">Save</button>
            </form>

            <button class="btn btn-sm btn-primary m-2 text-light" id="save-pic-filter">Save Picture <br> With Filter</button>
            <form action="" id="picture-name-form" class="hide">
                <input type="text" name="picture-name" id="picture-name" size="15"  placeholder="Picture name"></input>
                <button class="btn btn-sm btn-secondary">Save</button>
            </form>
            <select name="user_filters" id="user_filters">
                <option value="">--Your Filters--</option>
                {% for filter in user_filters %}
                <option value="{{filter.id}}">{{filter.full_name}}</option>
                {% endfor %}
            </select>
        </div>
    </div>

    <div id="buttons" class="row">
        {% for button in buttons %}
        <button class="btn btn-secondary m-2" id="{{button.short_name}}" data-id="{{button.id}}">{{button.full_name}}</button>
        {% endfor %}
    </div>
</div>
{% endblock %}